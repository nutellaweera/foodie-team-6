# foodie-team-6
<img width="192" alt="Screenshot 2022-05-04 at 4 52 53 pm" src="https://user-images.githubusercontent.com/8774488/166737996-2fd71307-4663-49f2-aca8-3e8014dbb330.png">

CalCheck aims to recognize the number of calories associated with an image of food.

This repository contains prototypes for an application developed as part of the requirement for the Interdisciplinary Group Project module at UWE. 
Prototype versions were based on initial requirement specs and MVP documented in the Blackboard wiki, each version building on its predescessor. 


The simplified design is as follows:

<img width="310" alt="Screenshot 2022-05-04 at 3 56 01 pm" src="https://user-images.githubusercontent.com/8774488/166711112-016dc409-7e5d-4e3e-8db1-05f13d1c25df.png">

## Version information
### V1
A Jupyter notebook with data stored in .csv format, with the ability to determine the number of calories in a hardcoded image using the Google Vision API.

### V2
A Jupyter notebook with data stored in a Firebase Firestore db.

### V3
A Jupyter notebook with the ability to accept an image from a user (using a file selection iPyWidget) and determine the number of calories in it.

### V4
A notebook with a Python API broken out seperately, and automated testing with the ability to scrape a folder of images and determine the calorie counts+accuracy of the labeling.

### V5 
A simple GUI developed using PySimpleGUI to accept an image from a user and display the number of calories using the API developed in V4. Currently in the `mvp_refactored` folder.

## Setup and run - instructions
### Setup
* Clone the repo 
* Setup Google Cloud Vision locally, set the env variable for authentication - Refer the [official tutorial](https://codelabs.developers.google.com/codelabs/cloud-vision-api-python#1)
* Create a `/key` folder in the project root and save the key generated by google vision (.json)
* Setup Firebase, add the key to the same `/key` folder.
* Add the calorie dataset of your choice into the `/data` folder (ours is titled [calorie-dataset.csv](https://github.com/nutellaweera/foodie-team-6/blob/main/data/calorie_counts.csv), if the name is different, modify `mapper_utils`). We used the [food-101 calorie dataset](https://www.kaggle.com/datasets/vaishnavivenkatesan/food-and-their-calories) from Kaggle).
* Run [install.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/install.py) to setup the dependencies.
* Run `mapper_utils.add_data_to_firestore` to upload the data to firebase.

### To run the GUI (for a single image)
* Run [gui.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/gui.py) 

### To test/run in bulk
* Add images to the /images folder, name them with the expected label (i.e. hamburger.png).
* Run [test.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/test.py)

Sample automated test report:
![Screenshot 2022-04-25 at 9 48 08 pm](https://user-images.githubusercontent.com/8774488/166497283-ac402f8d-fb56-4e4d-908a-a2a8e4a41fd4.png)


## Links and references
* [Kanban board](https://github.com/users/nutellaweera/projects/1)
* [Calorie dataset](https://www.kaggle.com/datasets/vaishnavivenkatesan/food-and-their-calories)
* [Google Vision API docs](https://cloud.google.com/vision/docs)
* [Firebase Firestore docs](https://firebase.google.com/docs/firestore)
* [PySimpleGUI docs](https://pysimplegui.readthedocs.io/en/latest/)
