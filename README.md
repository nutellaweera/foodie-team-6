# foodie-team-6
Contains prototypes for an application developed as part of the requirement for the Interdisciplinary Group Project module at UWE. 
Prototype versions based on initial requirement spec and MVP documented in the Blackboard wiki, each version building on its predescessor. 

CalCheck aims to recognize the number of calories associated with an image of food.

The simplified design is as follows:
<img width="310" alt="Screenshot 2022-05-04 at 3 56 01 pm" src="https://user-images.githubusercontent.com/8774488/166711112-016dc409-7e5d-4e3e-8db1-05f13d1c25df.png">

## Version information
### V1
A Jupyter notebook with data stored in .csv format, with the ability to determine the number of calories in a hardcoded image using the Google Vision API.

### V2
A Jupyter notebook with data stored in a Firebase Firestore db.

### V3
A Jupyter notebook with the ability to accept an image from a user (using a file selection iPyWidget) and determine the number of calories in it.

### V4
A notebook with a Python API broken out seperately, and automated testing with the ability to scrape a folder of images and determine the calorie counts+accuracy of the labeling.

### V5 
A simple GUI developed using PySimpleGUI to accept an image from a user and display the number of calories using the API developed in V4.

## Setup instructions and running
### Setup
* Clone the repo 
* Run [install.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/install.py).
* Setup Google Cloud Vision locally, set the env variable for authentication - Refer the [official tutorial](https://codelabs.developers.google.com/codelabs/cloud-vision-api-python#1)
* Create a /key folder in the project root and save the key generated by google vision (.json)
* Setup Firebase, add the key to the same /key folder.
* Add the calorie dataset of your choice into a new /data folder (ours is titled calorie-dataset.csv, if the name is different, modify the mapper_utils.add_data_to_firestore function). We used the [food-101 calorie dataset](https://www.kaggle.com/datasets/vaishnavivenkatesan/food-and-their-calories) from Kaggle).

### To run the GUI (for a single image)
* Run [gui.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/gui.py) 

### To run in bulk
* Add images to the /images folder, name them with the expected label (i.e. hamburger.png).
* Run [test.py](https://github.com/nutellaweera/foodie-team-6/blob/main/mvp_refactored/test.py)
Sample report:
![Screenshot 2022-04-25 at 9 48 08 pm](https://user-images.githubusercontent.com/8774488/166497283-ac402f8d-fb56-4e4d-908a-a2a8e4a41fd4.png)


## Links and references
* [Kanban board](https://github.com/users/nutellaweera/projects/1)
* [Calorie dataset](https://www.kaggle.com/datasets/vaishnavivenkatesan/food-and-their-calories)
* [Google Vision API docs](https://cloud.google.com/vision/docs)
* [Firebase Firestore docs](https://firebase.google.com/docs/firestore)
* [PySimpleGUI docs](https://pysimplegui.readthedocs.io/en/latest/)
